!===============================================================================
! Module: particle_data
! 粒子データ構造とパラメータ型定義（0D-3V用）
!===============================================================================
module particle_data
   use constants, only: dp
   implicit none

   !-----------------------------------------------------------------------------
   ! 粒子型（0D: 位置情報なし、速度のみ）
   !-----------------------------------------------------------------------------
   type :: particle_0d
      real(dp) :: vx, vy, vz  ! 速度成分 [m/s]
      logical  :: alive       ! 生存フラグ（電離時にfalse）
   end type particle_0d

   !-----------------------------------------------------------------------------
   ! シミュレーションパラメータ型
   !-----------------------------------------------------------------------------
   type :: sim_params
      integer  :: n_particles      ! テスト粒子数
      integer  :: n_steps          ! ステップ数
      real(dp) :: dt               ! 時間刻み [s]
      integer  :: seed             ! 乱数シード
      logical  :: enable_cx        ! 荷電交換 On/Off
      logical  :: enable_elastic   ! 弾性散乱 On/Off
      logical  :: use_isotropic    ! 等方散乱フラグ
      character(len=256) :: cdf_file  ! CDFファイル名
   end type sim_params

   !-----------------------------------------------------------------------------
   ! プラズマパラメータ型
   !-----------------------------------------------------------------------------
   type :: plasma_params
      real(dp) :: n_bg      ! 背景イオン密度 [m^-3]
      real(dp) :: T_bg      ! 背景イオン温度 [eV]
   end type plasma_params

   !-----------------------------------------------------------------------------
   ! 粒子初期条件型
   !-----------------------------------------------------------------------------
   type :: init_params
      real(dp) :: E_init    ! 初期エネルギー [eV] (ビーム分布用)
      real(dp) :: T_init    ! 初期温度 [eV] (Maxwell分布用)
      integer  :: init_mode ! 0: ビーム(+x方向), 1: Maxwell分布
   end type init_params

   !-----------------------------------------------------------------------------
   ! 診断パラメータ型
   !-----------------------------------------------------------------------------
   type :: diag_params
      integer  :: output_interval  ! 診断出力間隔 [ステップ]
      integer  :: n_hist_bins      ! ヒストグラムビン数
      real(dp) :: E_hist_min       ! ヒストグラム最小エネルギー [eV]
      real(dp) :: E_hist_max       ! ヒストグラム最大エネルギー [eV]
   end type diag_params

end module particle_data
